<!DOCTYPE html>
<html>
<head>
<meta charset="gb2312"/>
<title>Test</title>
<meta name="author" content="yanni4night@gmail.com"/>
<style>
    body{
        padding: 0;
        margin: 0;
        background: #333;
        color: #fff;
    }
    .passport-dialog{
        width: 400px;
        position: fixed;
        _position:absolute;
        left: 50%;
        top:100px;
        margin-left: -200px;
    }
</style>
</head>
<body>
    <p>点击下面的按钮，Passport lib 会从网络加载必要的css与js文件，并构建一个样式统一定义的登录对话框。</p>
    <p id="msg"></p>
    <button onclick="javascript:load();">Load</button>    
    <div class="passport-dialog" id="passport-dialog"></div>
</body>
<script type="text/javascript" src="dist/@version@/js/passport-core.js"></script>
<script>
    function $(id){
        return document.getElementById(id);
    }

    var inited = false;

    window.PassportSC({
        appid:1120,
        redirectUrl:location.protocol + '//' + location.host + '/jump.html'
    });

    PassportSC.on('canvasclosing',function(){
        $('passport-dialog').style.display = 'none';
    });

    PassportSC.on('drawcomplete',function(e){
        $('msg').innerHTML = e.type;
    });

    function load(){
        if(inited){
            return $('passport-dialog').style.display = 'block';
        }else{
            inited = true;
            PassportSC.draw({
                container:$('passport-dialog'),
                trdRedirectUrl:location.protocol + '//' + location.host + '/popup.html'
            });
        }
    }
</script>
</html>
